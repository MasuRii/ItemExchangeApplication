{% load static i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% trans "Login" %}</title>
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
</head>
<body>
    <div class="overlay" id="overlay"></div> <!-- Full-page overlay -->

    <div class="login-container" id="loginContainer">
        <div class="login-form">
            <div class="logo">
                <img src="{% static 'svg/swapspot-logo-dark.svg' %}" alt="SwapSpot Logo">
            </div>

            <h2>{% trans "Welcome Back" %}</h2>

            <form method="post">
                {% csrf_token %}

                <div class="input-group">
                    <label for="{{ form.username.id_for_label }}">{% trans "Username or Email" %}:</label>
                    {{ form.username.as_widget }}
                </div>

                <div class="input-group">
                    <label for="{{ form.password.id_for_label }}">{% trans "Password" %}:</label>
                    {{ form.password.as_widget }}
                </div>

                <div class="options">
                    <div class="remember-me">
                        {{ form.remember_me }}
                        <label for="{{ form.remember_me.id_for_label }}">{% trans "Remember me" %}</label>
                    </div>
                </div>

                <button type="submit" class="login-button">{% trans "Login" %}</button>
            </form>

            <div class="signup-link">
                <p>{% trans "Don't have an account?" %} <a href="{{ signup_url }}">{% trans "Sign up" %}</a></p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const overlay = document.getElementById('overlay');
            const loginContainer = document.getElementById('loginContainer');

            // Show the login form
            function showLoginForm() {
                overlay.style.display = 'none'; // Hide the overlay
                loginContainer.style.display = 'flex'; // Show the login form
                localStorage.setItem('showLogin', 'true'); // Persist the state
            }

            // Handle overlay click
            overlay.addEventListener('click', () => {
                console.log('Overlay clicked'); // Debug message
                showLoginForm();
            });

            // Check if the login form should persist across pages
            if (localStorage.getItem('showLogin') === 'true') {
                showLoginForm();
            }
        });
    </script>
</body>
</html>